<!DOCTYPE html>
<div style="display:none" id="email_session" name="email_session">{{email}}</div>
<html>

<head>
  <title>Hello {{name}}</title>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">   
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">        
    </script>
    
</head>
  

  <script type="text/javascript">

    const url1='getMedData/';
    
    function dataGet_User(url,table_name){
    data=fetch(url).then(data=>{return data.json()}).then(
    data=>{
      console.log(data)
       var table=document.getElementById(table_name)
        for(i=0;i<data.length;i++){
          
          row = document.createElement("tr");
          cellA = document.createElement("td");
          cellL=document.createElement("td");
          cellE=document.createElement("td");

          var id=data[i].med_id

          char1=document.createElement("text");
          char1.innerHTML=" | "

          view=document.createElement("a");
          view.innerHTML="View"
          view.id=id+"_view"
          view.href="myMed?id="+view.id

          remove=document.createElement("a");
          remove.innerHTML="Remove"
          remove.id=id+"_remove"
          remove.href="myMed?id="+remove.id

          date=document.createElement("td");
          date.innerHTML=data[i].posted_on
          cellE.appendChild(date);
          
          
          cellL.appendChild(view)
          cellL.appendChild(char1)
          cellL.appendChild(remove)

          cellA.innerHTML=data[i].title
          
          table.appendChild(row);
          row.appendChild(cellA);
          row.appendChild(cellL);
          row.appendChild(cellE);
          
           }

          } )
            }
    
    
    dataGet_User(url1,"med_table")
  
  </script>
</head>



<body>
  <div class="box">
  <h1>Hello {{name}}!</h1>

  <div class="logout"><a href="logout">Logout</a></div>
  <button onclick="window.location.href='newMed'" id="newMed_button">
    New conditon
  </button>

  <div id="med"></div>
  <h1>Registered medical conditions:</h1>
      <table border="1" width="600" id="med_table">
          <tr>
          <td id="highlighted">View</td>
          <td id="highlighted">Action</td>
          <td id="highlighted">Date</td>
          </tr>
          <tr>
            
          </tr>
      </table>

      

      </div>
    </div>
</body>

</html>